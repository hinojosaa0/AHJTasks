</div>
                                                )}

                                                <div className="tasks-list">
                                                    {!project.tasks || project.tasks.length === 0 ? (
                                                        <div className="empty-state">
                                                            <p>No tasks yet. Click "‚ûï" to create one.</p>
                                                        </div>
                                                    ) : (
                                                        project.tasks.map(task => {
                                                            const daysRemaining = getDaysRemaining(task.dueDate);
                                                            const daysText = formatDaysRemaining(daysRemaining);
                                                            const daysClass = getDaysRemainingClass(daysRemaining);
                                                            const showDaysBadge = task.status !== 'Completed' && daysText;

                                                            return (
                                                                <div key={task.id} className="task-item">
                                                                    <div className="task-header">
                                                                        <div className="task-title">
                                                                            {task.name}
                                                                            {showDaysBadge && (
                                                                                <span className={`days-remaining ${daysClass}`}>
                                                                                    {daysText}
                                                                                </span>
                                                                            )}
                                                                        </div>
                                                                        <div style={{ display: 'flex', gap: '8px' }}>
                                                                            <button 
                                                                                className="btn btn-secondary btn-small"
                                                                                onClick={() => openTaskModal(project, task)}
                                                                            >
                                                                                ‚úèÔ∏è
                                                                            </button>
                                                                            <button 
                                                                                className="btn btn-danger btn-small"
                                                                                onClick={() => deleteTask(project.id, task.id)}
                                                                            >
                                                                                üóëÔ∏è
                                                                            </button>
                                                                        </div>
                                                                    </div>
                                                                    <div className="task-details">
                                                                        <div className="task-field">
                                                                            <div className="task-label">Owner</div>
                                                                            <div className="task-value">{task.owner || 'Unassigned'}</div>
                                                                        </div>
                                                                        <div className="task-field">
                                                                            <div className="task-label">Status</div>
                                                                            <div className="task-value">
                                                                                <span className={`status-badge ${getStatusClass(task.status)}`}>
                                                                                    {task.status}
                                                                                </span>
                                                                            </div>
                                                                        </div>
                                                                        <div className="task-field">
                                                                            <div className="task-label">Due Date</div>
                                                                            <div className="task-value">{task.dueDate || 'Not set'}</div>
                                                                        </div>
                                                                        <div className="task-field">
                                                                            <div className="task-label">Priority</div>
                                                                            <div className={`task-value ${getPriorityClass(task.priority)}`}>
                                                                                {task.priority}
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    {task.notes && (
                                                                        <div className="task-notes">
                                                                            üìù {task.notes}
                                                                        </div>
                                                                    )}
                                                                </div>
                                                            );
                                                        })
                                                    )}
                                                </div>
                                            </div>
                                        )}
                                    </div>
                                );
                            })
                        )}
                        </div>
                    )}

                    {showProjectModal && (
                        <div className="modal" onClick={() => setShowProjectModal(false)}>
                            <div className="modal-content" onClick={e => e.stopPropagation()}>
                                <div className="modal-header">Create New Project</div>
                                <div className="form-group">
                                    <label className="form-label">Project Name</label>
                                    <input
                                        type="text"
                                        className="form-input"
                                        value={newProjectName}
                                        onChange={e => setNewProjectName(e.target.value)}
                                        placeholder="e.g., Q1 M&A Pipeline"
                                        onKeyPress={e => e.key === 'Enter' && addProject()}
                                    />
                                </div>
                                <div className="modal-actions">
                                    <button className="btn btn-secondary" onClick={() => setShowProjectModal(false)}>
                                        Cancel
                                    </button>
                                    <button className="btn btn-primary" onClick={addProject}>
                                        Create Project
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}

                    {showTaskModal && (
                        <div className="modal" onClick={() => setShowTaskModal(false)}>
                            <div className="modal-content" onClick={e => e.stopPropagation()}>
                                <div className="modal-header">
                                    {editingTask ? 'Edit Task' : 'Create New Task'}
                                </div>
                                
                                {!currentProject && !editingTask && (
                                    <div className="form-group">
                                        <label className="form-label">Project *</label>
                                        <select
                                            className="form-select"
                                            value={selectedProjectId}
                                            onChange={e => setSelectedProjectId(e.target.value)}
                                        >
                                            <option value="">Select a project</option>
                                            {projects.map(project => (
                                                <option key={project.id} value={project.id}>
                                                    {project.name}
                                                </option>
                                            ))}
                                        </select>
                                    </div>
                                )}
                                
                                <div className="form-group">
                                    <label className="form-label">Task Name</label>
                                    <input
                                        type="text"
                                        className="form-input"
                                        value={taskForm.name}
                                        onChange={e => setTaskForm({...taskForm, name: e.target.value})}
                                        placeholder="Enter task name"
                                    />
                                </div>
                                <div className="form-group">
                                    <label className="form-label">Owner</label>
                                    <input
                                        type="text"
                                        className="form-input"
                                        value={taskForm.owner}
                                        onChange={e => setTaskForm({...taskForm, owner: e.target.value})}
                                        placeholder="Enter owner name"
                                    />
                                </div>
                                <div className="form-group">
                                    <label className="form-label">Status</label>
                                    <select
                                        className="form-select"
                                        value={taskForm.status}
                                        onChange={e => setTaskForm({...taskForm, status: e.target.value})}
                                    >
                                        <option>Not Started</option>
                                        <option>In Progress</option>
                                        <option>Completed</option>
                                        <option>Blocked</option>
                                    </select>
                                </div>
                                <div className="form-group">
                                    <label className="form-label">Due Date</label>
                                    <input
                                        type="date"
                                        className="form-input"
                                        value={taskForm.dueDate}
                                        onChange={e => setTaskForm({...taskForm, dueDate: e.target.value})}
                                    />
                                </div>
                                <div className="form-group">
                                    <label className="form-label">Priority</label>
                                    <select
                                        className="form-select"
                                        value={taskForm.priority}
                                        onChange={e => setTaskForm({...taskForm, priority: e.target.value})}
                                    >
                                        <option>Low</option>
                                        <option>Medium</option>
                                        <option>High</option>
                                    </select>
                                </div>
                                <div className="form-group">
                                    <label className="form-label">Notes</label>
                                    <textarea
                                        className="form-textarea"
                                        value={taskForm.notes}
                                        onChange={e => setTaskForm({...taskForm, notes: e.target.value})}
                                        placeholder="Add any additional notes or details"
                                    />
                                </div>
                                <div className="modal-actions">
                                    <button className="btn btn-secondary" onClick={() => setShowTaskModal(false)}>
                                        Cancel
                                    </button>
                                    <button className="btn btn-primary" onClick={saveTask}>
                                        {editingTask ? 'Update Task' : 'Create Task'}
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}

                    {showNoteModal && (
                        <div className="modal" onClick={() => setShowNoteModal(false)}>
                            <div className="modal-content" onClick={e => e.stopPropagation()}>
                                <div className="modal-header">
                                    {editingNote ? 'Edit Note' : 'Create New Note'}
                                </div>
                                
                                <div className="form-group">
                                    <label className="form-label">Project *</label>
                                    <select
                                        className="form-select"
                                        value={noteForm.projectId}
                                        onChange={e => setNoteForm({...noteForm, projectId: e.target.value})}
                                        disabled={editingNote}
                                    >
                                        <option value="">Select a project</option>
                                        {projects.map(project => (
                                            <option key={project.id} value={project.id}>
                                                {project.name}
                                            </option>
                                        ))}
                                    </select>
                                </div>
                                
                                <div className="form-group">
                                    <label className="form-label">Title</label>
                                    <input
                                        type="text"
                                        className="form-input"
                                        value={noteForm.title}
                                        onChange={e => setNoteForm({...noteForm, title: e.target.value})}
                                        placeholder="Enter note title"
                                    />
                                </div>
                                <div className="form-group">
                                    <label className="form-label">Content</label>
                                    <textarea
                                        className="form-textarea"
                                        value={noteForm.content}
                                        onChange={e => setNoteForm({...noteForm, content: e.target.value})}
                                        placeholder="Enter note content"
                                        style={{ minHeight: '200px' }}
                                    />
                                </div>
                                <div className="modal-actions">
                                    <button className="btn btn-secondary" onClick={() => setShowNoteModal(false)}>
                                        Cancel
                                    </button>
                                    <button className="btn btn-primary" onClick={saveNote}>
                                        {editingNote ? 'Update Note' : 'Create Note'}
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}
                    </div>
                </>
            );
        }

        ReactDOM.render(<TaskManager />, document.getElementById('root'));
    </script>
</body>
</html>
